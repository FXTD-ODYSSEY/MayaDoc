
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>QQmlExtensionPlugin &#8212; Qt for Python</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <link rel="search" title="Search" href="../../search.html" />
  <link rel="stylesheet" type="text/css" href="/style/pyside.css" />
  <link rel="icon" type="image/png" href="/style/pyside-32px.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="/style/pyside-16px.png" sizes="16x16" />
  <script type="text/javascript"> wpThemeFolder = 'https://qt.io/wp-content/themes/oneqt'; </script>
  <script type="text/javascript" src="/scripts/main.js"></script>
  <script type="text/javascript" src="/scripts/extras.js"></script>
  <script type="text/javascript">
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-54043535-2', 'qt.io');
    ga('set', 'forceSSL', true);
    ga('send', 'pageview');
  </script>

  </head><body>
<div id="container">
    <div class="header">
        <div class="header_container">
            <header id="navbar">
            </header>
        </div>
    </div>
    <div class="main">
        <div class="main-rounded">
            <div class="navigationbar">
                <ul class="sub-navigation">
                    <li><a href="https://wiki.qt.io/">Wiki</a></li>
                    <li><a href="https://doc.qt.io/">Documentation</a></li>
                    <li><a href="https://forum.qt.io/">Forum</a></li>
                    <li><a href="https://bugreports.qt.io/">Bug Reports</a></li>
                    <li><a href="https://codereview.qt-project.org/">Code Review</a></li>
                </ul>
                <div id="main_title_bar"><h1>Qt Documentation</h1></div>
                <div class="related">
                    <ul>
                        
                        <li><a href="../../index.html">Qt for Python 5.13.0</a></li> 
                    </ul>
                </div>
            </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">QQmlExtensionPlugin</a><ul>
<li><a class="reference internal" href="#synopsis">Synopsis</a><ul>
<li><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#detailed-description">Detailed Description</a><ul>
<li><a class="reference internal" href="#timeexample-qml-extension-plugin">TimeExample QML extension plugin</a></li>
<li><a class="reference internal" href="#project-settings-for-the-plugin">Project settings for the plugin</a></li>
<li><a class="reference internal" href="#plugin-definition-in-the-qmldir">Plugin definition in the qmldir</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" id="q" size="18" />
      <input type="submit" value="Go" id="search_button" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="module-PySide2.QtQml"></span><div class="section" id="qqmlextensionplugin">
<span id="id1"></span><h1>QQmlExtensionPlugin<a class="headerlink" href="#qqmlextensionplugin" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p>The <a class="reference internal" href="#PySide2.QtQml.QQmlExtensionPlugin" title="PySide2.QtQml.QQmlExtensionPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">QQmlExtensionPlugin</span></code></a> class provides an abstract base for custom QML extension plugins. <a class="reference internal" href="#more">More</a>…</p>
</div></blockquote>
<div class="graphviz"><img src="../../_images/inheritance-58fe9b577ad6a62f97880cf12524a48aa4ed648b.png" alt="Inheritance diagram of PySide2.QtQml.QQmlExtensionPlugin" usemap="#inheritance6216471cb7" class="inheritance graphviz" /></div>
<map id="inheritance6216471cb7" name="inheritance6216471cb7">
<area shape="rect" id="node1" href="#PySide2.QtQml.QQmlExtensionPlugin" title="QtQml.QQmlExtensionPlugin" alt="" coords="275,31,477,56"/>
<area shape="rect" id="node2" href="../QtCore/QObject.html#PySide2.QtCore.QObject" title="QtCore.QObject" alt="" coords="55,5,177,31"/>
<area shape="rect" id="node3" href="QQmlExtensionInterface.html#PySide2.QtQml.QQmlExtensionInterface" title="QtQml.QQmlExtensionInterface" alt="" coords="5,55,227,80"/>
</map><div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<div class="function-list docutils container">
<ul class="simple">
<li><p>def <a class="reference internal" href="#PySide2.QtQml.PySide2.QtQml.QQmlExtensionPlugin.baseUrl" title="PySide2.QtQml.PySide2.QtQml.QQmlExtensionPlugin.baseUrl"><code class="xref py py-meth docutils literal notranslate"><span class="pre">baseUrl</span></code></a> ()</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="detailed-description">
<h2>Detailed Description<a class="headerlink" href="#detailed-description" title="Permalink to this headline">¶</a></h2>
<blockquote id="more">
<div><p><a class="reference internal" href="#PySide2.QtQml.QQmlExtensionPlugin" title="PySide2.QtQml.QQmlExtensionPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">QQmlExtensionPlugin</span></code></a> is a plugin interface that makes it possible to create QML extensions that can be loaded dynamically into QML applications. These extensions allow custom QML types to be made available to the QML engine.</p>
<p>To write a QML extension plugin:</p>
<ul class="simple">
<li><p>Write a project file for the plugin</p></li>
<li><p>Create a <span class="xref std std-ref">qmldir file</span> to describe the plugin</p></li>
</ul>
<p>QML extension plugins are for either application-specific or library-like plugins. Library plugins should limit themselves to registering types, as any manipulation of the engine’s root context may cause conflicts or other issues in the library user’s code.</p>
</div></blockquote>
<div class="section" id="timeexample-qml-extension-plugin">
<span id="pyside2-qtqml-qqmlextensionplugin-timeexample-qml-extension-plugin"></span><h3>TimeExample QML extension plugin<a class="headerlink" href="#timeexample-qml-extension-plugin" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Suppose there is a new <code class="docutils literal notranslate"><span class="pre">TimeModel</span></code> C++ class that should be made available as a new QML type. It provides the current time through <code class="docutils literal notranslate"><span class="pre">hour</span></code> and <code class="docutils literal notranslate"><span class="pre">minute</span></code> properties.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TimeModel</span> <span class="p">:</span> <span class="n">public</span> <span class="n">QObject</span>
<span class="p">{</span>
    <span class="n">Q_OBJECT</span>
    <span class="n">Q_PROPERTY</span><span class="p">(</span><span class="nb">int</span> <span class="n">hour</span> <span class="n">READ</span> <span class="n">hour</span> <span class="n">NOTIFY</span> <span class="n">timeChanged</span><span class="p">)</span>
    <span class="n">Q_PROPERTY</span><span class="p">(</span><span class="nb">int</span> <span class="n">minute</span> <span class="n">READ</span> <span class="n">minute</span> <span class="n">NOTIFY</span> <span class="n">timeChanged</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>To make this type available, we create a plugin class named <code class="docutils literal notranslate"><span class="pre">QExampleQmlPlugin</span></code> which is a subclass of <a class="reference internal" href="#PySide2.QtQml.QQmlExtensionPlugin" title="PySide2.QtQml.QQmlExtensionPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">QQmlExtensionPlugin</span></code></a> . It overrides the <code class="xref py py-meth docutils literal notranslate"><span class="pre">registerTypes()</span></code> method in order to register the <code class="docutils literal notranslate"><span class="pre">TimeModel</span></code> type using <code class="xref py py-meth docutils literal notranslate"><span class="pre">qmlRegisterType()</span></code> . It also uses the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Q_PLUGIN_METADATA()</span></code> macro in the class definition to register the plugin with the Qt meta object system using a unique identifier for the plugin.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">QExampleQmlPlugin</span> <span class="p">:</span> <span class="n">public</span> <span class="n">QQmlExtensionPlugin</span>
<span class="p">{</span>
    <span class="n">Q_OBJECT</span>
    <span class="n">Q_PLUGIN_METADATA</span><span class="p">(</span><span class="n">IID</span> <span class="n">QQmlExtensionInterface_iid</span><span class="p">)</span>

<span class="n">public</span><span class="p">:</span>
    <span class="n">void</span> <span class="n">registerTypes</span><span class="p">(</span><span class="n">const</span> <span class="n">char</span> <span class="o">*</span><span class="n">uri</span><span class="p">)</span> <span class="n">override</span>
    <span class="p">{</span>
        <span class="n">Q_ASSERT</span><span class="p">(</span><span class="n">uri</span> <span class="o">==</span> <span class="n">QLatin1String</span><span class="p">(</span><span class="s2">&quot;TimeExample&quot;</span><span class="p">));</span>
        <span class="n">qmlRegisterType</span><span class="o">&lt;</span><span class="n">TimeModel</span><span class="o">&gt;</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Time&quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>This registers the <code class="docutils literal notranslate"><span class="pre">TimeModel</span></code> class with version <code class="docutils literal notranslate"><span class="pre">1.0</span></code> of this plugin library, as a QML type called <code class="docutils literal notranslate"><span class="pre">Time</span></code> . The <code class="xref py py-meth docutils literal notranslate"><span class="pre">Q_ASSERT()</span></code> macro can ensure the type namespace is imported correctly by any QML components that use this plugin. The <span class="xref std std-ref">Defining QML Types from C++</span> article has more information about registering C++ types into the runtime.</p>
</div></blockquote>
</div>
<div class="section" id="project-settings-for-the-plugin">
<span id="pyside2-qtqml-qqmlextensionplugin-project-settings-for-the-plugin"></span><h3>Project settings for the plugin<a class="headerlink" href="#project-settings-for-the-plugin" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Additionally, the project file (<code class="docutils literal notranslate"><span class="pre">.pro</span></code> ) defines the project as a plugin library, specifies it should be built into the <code class="docutils literal notranslate"><span class="pre">imports/TimeExample</span></code> directory, and registers the plugin target name and various other details:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TEMPLATE</span> <span class="o">=</span> <span class="n">lib</span>
<span class="n">CONFIG</span> <span class="o">+=</span> <span class="n">qt</span> <span class="n">plugin</span>
<span class="n">QT</span> <span class="o">+=</span> <span class="n">qml</span>

<span class="n">DESTDIR</span> <span class="o">=</span> <span class="n">imports</span><span class="o">/</span><span class="n">TimeExample</span>
<span class="n">TARGET</span> <span class="o">=</span> <span class="n">qmlqtimeexampleplugin</span>
<span class="n">SOURCES</span> <span class="o">+=</span> <span class="n">qexampleqmlplugin</span><span class="o">.</span><span class="n">cpp</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="plugin-definition-in-the-qmldir">
<span id="pyside2-qtqml-qqmlextensionplugin-plugin-definition-in-the-qmldir"></span><h3>Plugin definition in the qmldir<a class="headerlink" href="#plugin-definition-in-the-qmldir" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Finally, a <span class="xref std std-ref">qmldir file</span> is required in the <code class="docutils literal notranslate"><span class="pre">imports/TimeExample</span></code> directory to describe the plugin and the types that it exports. The plugin includes a <code class="docutils literal notranslate"><span class="pre">Clock.qml</span></code> file along with the <code class="docutils literal notranslate"><span class="pre">qmlqtimeexampleplugin</span></code> that is built by the project (as shown above in the <code class="docutils literal notranslate"><span class="pre">.pro</span></code> file) so both of these need to be specified in the <code class="docutils literal notranslate"><span class="pre">qmldir</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Code</span> <span class="n">snippet</span> <span class="s2">&quot;/tmp/snapshot-qt5full-5.13.0/qt5/qtbase/qmlextensionplugins/imports/TimeExample/qmldir&quot;</span> <span class="ow">not</span> <span class="n">found</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>To make things easier for this example, the TimeExample source directory is in <code class="docutils literal notranslate"><span class="pre">imports/TimeExample</span></code> , and we build in-source. However, the structure of the source directory is not so important, as the <code class="docutils literal notranslate"><span class="pre">qmldir</span></code> file can specify paths to installed QML files.</p>
<p>What is important is the name of the directory that the qmldir is installed into. When the user imports our module, the QML engine uses the <span class="xref std std-ref">module identifier</span> (<code class="docutils literal notranslate"><span class="pre">TimeExample</span></code> ) to find the plugin, and so the directory in which it is installed must match the module identifier.</p>
<p>Once the project is built and installed, the new <code class="docutils literal notranslate"><span class="pre">Time</span></code> component is accessible by any QML component that imports the <code class="docutils literal notranslate"><span class="pre">TimeExample</span></code> module</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">TimeExample</span> <span class="mf">1.0</span> <span class="o">//</span> <span class="kn">import</span> <span class="nn">types</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">plugin</span>

<span class="n">Clock</span> <span class="p">{</span> <span class="o">//</span> <span class="n">this</span> <span class="k">class</span> <span class="nc">is</span> <span class="n">defined</span> <span class="ow">in</span> <span class="n">QML</span> <span class="p">(</span><span class="n">imports</span><span class="o">/</span><span class="n">TimeExample</span><span class="o">/</span><span class="n">Clock</span><span class="o">.</span><span class="n">qml</span><span class="p">)</span>

    <span class="n">Time</span> <span class="p">{</span> <span class="o">//</span> <span class="n">this</span> <span class="k">class</span> <span class="nc">is</span> <span class="n">defined</span> <span class="ow">in</span> <span class="n">C</span><span class="o">++</span> <span class="p">(</span><span class="n">plugin</span><span class="o">.</span><span class="n">cpp</span><span class="p">)</span>
        <span class="nb">id</span><span class="p">:</span> <span class="n">time</span>
    <span class="p">}</span>

    <span class="n">hours</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">hour</span>
    <span class="n">minutes</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">minute</span>

<span class="p">}</span>
</pre></div>
</div>
<p>The full source code is available in the <span class="xref std std-ref">plugins example</span> .</p>
<p>The <span class="xref std std-ref">Writing QML Extensions with C++</span> tutorial also contains a chapter on creating QML plugins.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="QQmlEngine.html#PySide2.QtQml.PySide2.QtQml.QQmlEngine.importPlugin" title="PySide2.QtQml.PySide2.QtQml.QQmlEngine.importPlugin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importPlugin()</span></code></a>  <code class="xref py py-class docutils literal notranslate"><span class="pre">How</span> <span class="pre">to</span> <span class="pre">Create</span> <span class="pre">Qt</span> <span class="pre">Plugins</span></code></p>
</div>
</div></blockquote>
<dl class="class">
<dt id="PySide2.QtQml.QQmlExtensionPlugin">
<em class="property">class </em><code class="sig-name descname">QQmlExtensionPlugin</code><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param">parent=None</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#PySide2.QtQml.QQmlExtensionPlugin" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">param parent</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">QObject</span></code></p>
</dd>
</dl>
</div></blockquote>
<p>Constructs a QML extension plugin with the given <code class="docutils literal notranslate"><span class="pre">parent</span></code> .</p>
<p>Note that this constructor is invoked automatically by the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Q_PLUGIN_METADATA()</span></code> macro, so there is no need for calling it explicitly.</p>
</dd></dl>

<dl class="method">
<dt id="PySide2.QtQml.PySide2.QtQml.QQmlExtensionPlugin.baseUrl">
<code class="sig-prename descclassname">PySide2.QtQml.QQmlExtensionPlugin.</code><code class="sig-name descname">baseUrl</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#PySide2.QtQml.PySide2.QtQml.QQmlExtensionPlugin.baseUrl" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">QUrl</span></code></p>
</dd>
</dl>
<p>Returns the URL of the directory from which the extension is loaded.</p>
<p>This is useful when the plugin also needs to load QML files or other assets from the same directory.</p>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <p>© 2019 The Qt Company Ltd. Documentation contributions included herein are the copyrights of their respective owners. The documentation provided herein is licensed under the terms of the <a href="http://www.gnu.org/license/fdl.html">GNU Free Documentation License version 1.3</a> as published by the Free Software Foundation. Qt and respective logos are trademarks of The Qt Company Ltd. in Finland and/or other countries worldwide. All other trademarks are property of their respective owners.</p>
    </div></div>
    <div id="footer" class="footer">
    </div>
</div>
  </body>
</html>